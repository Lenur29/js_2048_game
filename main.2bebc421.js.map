{"version":3,"sources":["scripts/main.js"],"names":["gameScore","document","querySelector","button","tableBody","tableBodyRows","rows","tableBodyCells","querySelectorAll","startMessage","winMessage","loseMessage","fieldWidth","shouldCreateNumber","buttonHandler","classList","contains","i","length","innerHTML","className","hidden","generateNumber","addEventListener","keyDownHandler","remove","add","func","randomNumber","Math","random","randomCell","floor","moveRight","currentRow","cells","cellsValues","map","cell","trueValues","filter","value","falseValues","j","newRow","k","moveLeft","moveUp","column","newColumn","moveDown","losingMessage","every","firstColumn","secondColumn","thirdColumn","fourthColumn","push","columns","ev","code","removeEventListener"],"mappings":"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","file":"main.2bebc421.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst gameScore = document.querySelector('.game-score');\n\nconst button = document.querySelector('.button');\n\nconst tableBody = document.querySelector('tbody');\n\nconst tableBodyRows = tableBody.rows;\n\nconst tableBodyCells = tableBody.querySelectorAll('td');\n\nconst startMessage = document.querySelector('.message-start');\n\nconst winMessage = document.querySelector('.message-win');\n\nconst loseMessage = document.querySelector('.message-lose');\n\nconst fieldWidth = 4;\n\nlet shouldCreateNumber = false;\n\nconst buttonHandler = () => {\n  if (button.classList.contains('restart')) {\n    for (let i = 0; i < tableBodyCells.length; i++) {\n      tableBodyCells[i].innerHTML = '';\n      tableBodyCells[i].className = 'field-cell';\n    };\n    startMessage.hidden = true;\n    winMessage.hidden = true;\n    loseMessage.hidden = true;\n    gameScore.innerHTML = 0;\n    generateNumber();\n    generateNumber();\n    document.addEventListener('keydown', keyDownHandler);\n\n    return;\n  }\n\n  button.classList.remove('start');\n  button.innerHTML = 'Restart';\n  button.classList.add('restart');\n  startMessage.hidden = true;\n  winMessage.hidden = true;\n  loseMessage.hidden = true;\n  gameScore.innerHTML = 0;\n  generateNumber();\n  generateNumber();\n};\n\nconst generateNumber = function func() {\n  const randomNumber = Math.random();\n\n  const randomCell = Math.floor(randomNumber * tableBodyCells.length);\n\n  if (randomNumber < 0.1 && !tableBodyCells[randomCell].innerHTML) {\n    tableBodyCells[randomCell].innerHTML = 4;\n    tableBodyCells[randomCell].classList.add('field-cell--4');\n  } else if (randomNumber > 0.1 && !tableBodyCells[randomCell].innerHTML) {\n    tableBodyCells[randomCell].innerHTML = 2;\n    tableBodyCells[randomCell].classList.add('field-cell--2');\n  } else {\n    func();\n  }\n};\n\nbutton.addEventListener('click', buttonHandler);\n\nconst moveRight = () => {\n  for (let i = 0; i < tableBodyRows.length; i++) {\n    const currentRow = tableBodyRows[i].cells;\n\n    const cellsValues = [...currentRow].map(cell => +cell.innerHTML);\n\n    const trueValues = cellsValues.filter(value => value);\n\n    const falseValues = cellsValues.filter(value => !value);\n\n    if (trueValues.length >= 1) {\n      for (let j = trueValues.length - 1; j >= 0; j--) {\n        if (trueValues[j] === trueValues[j + 1]) {\n          trueValues[j + 1] = trueValues[j + 1] + trueValues[j];\n          trueValues[j] = 0;\n\n          gameScore.innerHTML = trueValues[j + 1] + +gameScore.innerHTML;\n\n          if (+trueValues[j + 1] >= 2048) {\n            winMessage.hidden = false;\n          }\n        }\n\n        if (trueValues[j + 1] === 0) {\n          trueValues[j + 1] = trueValues[j];\n          trueValues[j] = 0;\n        }\n      }\n    }\n\n    const newRow = [...falseValues, ...trueValues];\n\n    for (let k = 0; k < newRow.length; k++) {\n      if (cellsValues[k] !== newRow[k]) {\n        shouldCreateNumber = true;\n      }\n\n      if (newRow[k] === 0) {\n        newRow[k] = '';\n      }\n      currentRow[k].innerHTML = newRow[k];\n      currentRow[k].className = 'field-cell';\n\n      if (currentRow[k].innerHTML) {\n        currentRow[k].classList.add(`field-cell--${newRow[k]}`);\n      }\n    }\n  }\n};\n\nconst moveLeft = () => {\n  for (let i = 0; i < tableBodyRows.length; i++) {\n    const currentRow = tableBodyRows[i].cells;\n\n    const cellsValues = [...currentRow].map(cell => +cell.innerHTML);\n\n    const trueValues = cellsValues.filter(value => value);\n\n    const falseValues = cellsValues.filter(value => !value);\n\n    if (trueValues.length >= 1) {\n      for (let j = 0; j < trueValues.length - 1; j++) {\n        if (trueValues[j] === trueValues[j + 1]) {\n          trueValues[j] = trueValues[j + 1] + trueValues[j];\n          trueValues[j + 1] = 0;\n\n          gameScore.innerHTML = trueValues[j] + +gameScore.innerHTML;\n\n          if (+trueValues[j] >= 2048) {\n            winMessage.hidden = false;\n          }\n        }\n\n        if (trueValues[j] === 0) {\n          trueValues[j] = trueValues[j + 1];\n          trueValues[j + 1] = 0;\n        }\n      }\n    }\n\n    const newRow = [...trueValues, ...falseValues];\n\n    for (let k = 0; k < newRow.length; k++) {\n      if (cellsValues[k] !== newRow[k]) {\n        shouldCreateNumber = true;\n      }\n\n      if (newRow[k] === 0) {\n        newRow[k] = '';\n      }\n      currentRow[k].innerHTML = newRow[k];\n      currentRow[k].className = 'field-cell';\n\n      if (currentRow[k].innerHTML) {\n        currentRow[k].classList.add(`field-cell--${newRow[k]}`);\n      }\n    }\n  }\n};\n\nconst moveUp = () => {\n  for (let i = 0; i < fieldWidth; i++) {\n    const column = [\n      +tableBodyCells[i].innerHTML,\n      +tableBodyCells[i + fieldWidth].innerHTML,\n      +tableBodyCells[i + fieldWidth * 2].innerHTML,\n      +tableBodyCells[i + fieldWidth * 3].innerHTML,\n    ];\n\n    const trueValues = column.filter(value => value);\n\n    const falseValues = column.filter(value => !value);\n\n    if (trueValues.length > 1) {\n      for (let j = 0; j < trueValues.length - 1; j++) {\n        if (trueValues[j] === trueValues[j + 1]) {\n          trueValues[j] = trueValues[j + 1] + trueValues[j];\n          trueValues[j + 1] = 0;\n\n          gameScore.innerHTML = trueValues[j] + +gameScore.innerHTML;\n\n          if (+trueValues[j] >= 2048) {\n            winMessage.hidden = false;\n          }\n        }\n\n        if (trueValues[j] === 0) {\n          trueValues[j] = trueValues[j + 1];\n          trueValues[j + 1] = 0;\n        }\n      }\n    }\n\n    const newColumn = [...trueValues, ...falseValues];\n\n    for (let k = 0; k < newColumn.length; k++) {\n      if (column[k] !== newColumn[k]) {\n        shouldCreateNumber = true;\n      }\n\n      if (newColumn[k] === 0) {\n        newColumn[k] = '';\n      }\n    }\n\n    tableBodyCells[i].innerHTML = newColumn[0];\n    tableBodyCells[i].className = `field-cell field-cell--${newColumn[0]}`;\n\n    tableBodyCells[i + fieldWidth].innerHTML = newColumn[1];\n\n    tableBodyCells[i + fieldWidth]\n      .className = `field-cell field-cell--${newColumn[1]}`;\n\n    tableBodyCells[i + fieldWidth * 2].innerHTML = newColumn[2];\n\n    tableBodyCells[i + fieldWidth * 2]\n      .className = `field-cell field-cell--${newColumn[2]}`;\n\n    tableBodyCells[i + fieldWidth * 3].innerHTML = newColumn[3];\n\n    tableBodyCells[i + fieldWidth * 3]\n      .className = `field-cell field-cell--${newColumn[3]}`;\n  }\n};\n\nconst moveDown = () => {\n  for (let i = 0; i < fieldWidth; i++) {\n    const column = [\n      +tableBodyCells[i].innerHTML,\n      +tableBodyCells[i + fieldWidth].innerHTML,\n      +tableBodyCells[i + fieldWidth * 2].innerHTML,\n      +tableBodyCells[i + fieldWidth * 3].innerHTML,\n    ];\n\n    const trueValues = column.filter(value => value);\n\n    const falseValues = column.filter(value => !value);\n\n    if (trueValues.length > 1) {\n      for (let j = trueValues.length - 1; j >= 0; j--) {\n        if (trueValues[j] === trueValues[j + 1]) {\n          trueValues[j + 1] = trueValues[j + 1] + trueValues[j];\n          trueValues[j] = 0;\n\n          gameScore.innerHTML = trueValues[j + 1] + +gameScore.innerHTML;\n\n          if (+trueValues[j + 1] >= 2048) {\n            winMessage.hidden = false;\n          }\n        }\n\n        if (trueValues[j + 1] === 0) {\n          trueValues[j + 1] = trueValues[j];\n          trueValues[j] = 0;\n        }\n      }\n    }\n\n    const newColumn = [...falseValues, ...trueValues];\n\n    for (let k = 0; k < newColumn.length; k++) {\n      if (column[k] !== newColumn[k]) {\n        shouldCreateNumber = true;\n      }\n\n      if (newColumn[k] === 0) {\n        newColumn[k] = '';\n      }\n    }\n\n    tableBodyCells[i].innerHTML = newColumn[0];\n    tableBodyCells[i].className = `field-cell field-cell--${newColumn[0]}`;\n\n    tableBodyCells[i + fieldWidth].innerHTML = newColumn[1];\n\n    tableBodyCells[i + fieldWidth]\n      .className = `field-cell field-cell--${newColumn[1]}`;\n\n    tableBodyCells[i + fieldWidth * 2].innerHTML = newColumn[2];\n\n    tableBodyCells[i + fieldWidth * 2]\n      .className = `field-cell field-cell--${newColumn[2]}`;\n\n    tableBodyCells[i + fieldWidth * 3].innerHTML = newColumn[3];\n\n    tableBodyCells[i + fieldWidth * 3]\n      .className = `field-cell field-cell--${newColumn[3]}`;\n  }\n};\n\nconst losingMessage = () => {\n  const availableEmptyCells = [...tableBodyCells]\n    .every(cell => cell.innerHTML !== '');\n\n  if (!availableEmptyCells) {\n    return false;\n  }\n\n  for (let i = 0; i < tableBodyRows.length; i++) {\n    for (let j = 0; j < tableBodyRows[i].cells.length - 1; j++) {\n      if (tableBodyRows[i].cells[j].innerHTML\n        === tableBodyRows[i].cells[j + 1].innerHTML) {\n        return false;\n      }\n    }\n  }\n\n  const firstColumn = [];\n  const secondColumn = [];\n  const thirdColumn = [];\n  const fourthColumn = [];\n\n  for (let i = 0; i < tableBodyRows.length; i++) {\n    for (let j = 0; j < tableBodyRows[i].cells.length - 1; j++) {\n      if (j === 0) {\n        firstColumn.push(+tableBodyRows[i].cells[j].innerHTML);\n      };\n\n      if (j === 1) {\n        secondColumn.push(+tableBodyRows[i].cells[j].innerHTML);\n      };\n\n      if (j === 2) {\n        thirdColumn.push(+tableBodyRows[i].cells[j].innerHTML);\n      };\n\n      if (j === 3) {\n        fourthColumn.push(+tableBodyRows[i].cells[j].innerHTML);\n      };\n    }\n  }\n\n  const columns = [firstColumn, secondColumn, thirdColumn, fourthColumn];\n\n  for (let i = 0; i < columns.length; i++) {\n    for (let j = 0; j < columns[i].length - 1; j++) {\n      if (columns[i][j] === columns[i][j + 1]) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n\nconst keyDownHandler = (ev) => {\n  if (button.classList.contains('restart') && winMessage.hidden) {\n    switch (ev.code) {\n      case 'ArrowUp':\n        moveUp();\n\n        if (shouldCreateNumber) {\n          generateNumber();\n          shouldCreateNumber = false;\n        }\n        break;\n\n      case 'ArrowRight':\n        moveRight();\n\n        if (shouldCreateNumber) {\n          generateNumber();\n          shouldCreateNumber = false;\n        }\n        break;\n\n      case 'ArrowDown':\n        moveDown();\n\n        if (shouldCreateNumber) {\n          generateNumber();\n          shouldCreateNumber = false;\n        }\n        break;\n\n      case 'ArrowLeft':\n        moveLeft();\n\n        if (shouldCreateNumber) {\n          generateNumber();\n          shouldCreateNumber = false;\n        }\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  if (losingMessage()) {\n    loseMessage.hidden = false;\n    document.removeEventListener('keydown', keyDownHandler);\n  }\n};\n\ndocument.addEventListener('keydown', keyDownHandler);\n"]}